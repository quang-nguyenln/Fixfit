{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport { useNavigation } from '@react-navigation/native';\nimport React, { useState, useEffect } from 'react';\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport View from \"react-native-web/dist/exports/View\";\nimport ImageBackground from \"react-native-web/dist/exports/ImageBackground\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport { ref, uploadBytes, uploadBytesResumable, uploadString, getDownloadURL } from \"firebase/storage\";\nimport { Ionicons, MaterialIcons } from '@expo/vector-icons';\nimport { useAuthentication } from \"../../utils/hooks/useAuthentication\";\nimport { storage, db } from \"../../config/firebase\";\nimport { setDoc, doc } from 'firebase/firestore';\nimport { useIsFocused } from '@react-navigation/native';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\n\nvar EditPost = function EditPost(_ref) {\n  var route = _ref.route;\n  var isFocused = useIsFocused();\n  var navigation = useNavigation();\n  var item = route.params.item;\n\n  var _useState = useState(''),\n      _useState2 = _slicedToArray(_useState, 2),\n      url = _useState2[0],\n      setUrl = _useState2[1];\n\n  var _useState3 = useState(''),\n      _useState4 = _slicedToArray(_useState3, 2),\n      caption = _useState4[0],\n      setCaption = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      uploading = _useState6[0],\n      setUploading = _useState6[1];\n\n  useEffect(function () {\n    setCaption(item.caption);\n    console.log(url);\n    setUrl(item.imageUrl);\n  }, [isFocused]);\n\n  var sharePost = function _callee() {\n    var dateTime, imageRef, postRef;\n    return _regeneratorRuntime.async(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            setUploading(true);\n            dateTime = item.postName;\n            imageRef = ref(storage, item.email + \"/images/\" + dateTime);\n\n            try {\n              postRef = doc(db, \"users\", item.email, \"posts\", dateTime);\n              setDoc(postRef, {\n                name: dateTime,\n                url: item.imageUrl,\n                caption: caption\n              });\n              setUploading(false);\n              setCaption('');\n              setUrl('');\n              navigation.navigate(\"Social\");\n            } catch (error) {\n              console.log(error);\n            }\n\n          case 4:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var PostHeader = function PostHeader() {\n    var navigation = useNavigation();\n    return _jsxs(View, {\n      style: headerStyles.header,\n      children: [_jsx(Button, {\n        title: \"Cancel\",\n        onPress: function onPress() {\n          return navigation.navigate('Social');\n        }\n      }), _jsx(Text, {\n        style: headerStyles.titleText,\n        children: \"Post\"\n      }), _jsx(Button, {\n        title: \"Edit\",\n        onPress: sharePost\n      })]\n    });\n  };\n\n  return _jsxs(SafeAreaView, {\n    style: styles.imagePrev,\n    children: [_jsx(PostHeader, {}), _jsx(View, {\n      style: {\n        marginVertical: 10,\n        justifyContent: 'center',\n        alignItems: 'center'\n      },\n      children: uploading && _jsx(Text, {\n        style: {\n          color: 'gray'\n        },\n        children: \"Uploading in progress...\"\n      })\n    }), _jsx(ScrollView, {\n      keyboardShouldPersistTaps: \"handled\",\n      children: _jsxs(View, {\n        style: styles.comment,\n        children: [_jsx(Image, {\n          source: {\n            uri: url\n          },\n          style: styles.itemPhoto\n        }), _jsx(TextInput, {\n          value: caption,\n          style: styles.input,\n          multiline: true,\n          textAlignVertical: \"top\",\n          placeholder: \"Comment...\",\n          onChangeText: function onChangeText(text) {\n            return setCaption(text);\n          }\n        })]\n      })\n    })]\n  });\n};\n\nvar headerStyles = StyleSheet.create({\n  header: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    paddingHorizontal: 10,\n    height: '6%',\n    backgroundColor: '#fff',\n    borderBottomColor: '#808080',\n    borderBottomWidth: StyleSheet.hairlineWidth\n  },\n  titleText: {\n    fontSize: 18,\n    fontWeight: '600'\n  }\n});\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    justifyContent: 'center',\n    backgroundColor: '#fff'\n  },\n  sectionHeader: {\n    fontWeight: '700',\n    fontSize: 19,\n    color: '#000000',\n    marginTop: 20,\n    marginBottom: 10\n  },\n  item: {\n    paddingRight: 20\n  },\n  itemPhoto: {\n    aspectRatio: 1,\n    height: 80,\n    margin: 8\n  },\n  itemText: {\n    color: '#000000',\n    marginTop: 5\n  },\n  imagePrev: {\n    backgroundColor: 'white',\n    flex: 1\n  },\n  cancelButton: {\n    position: 'absolute',\n    top: 40,\n    left: 40,\n    flex: 0.1,\n    color: '#fff'\n  },\n  secondScreen: {\n    position: 'absolute',\n    bottom: 40,\n    right: 40,\n    flex: 0.1,\n    color: '#fff'\n  },\n  text: {\n    fontSize: 20,\n    color: 'white'\n  },\n  input: {\n    flex: 1,\n    marginVertical: 10,\n    paddingHorizontal: 6\n  },\n  comment: {\n    flexDirection: 'row',\n    height: 95,\n    borderBottomColor: '#808080',\n    borderBottomWidth: StyleSheet.hairlineWidth\n  },\n  wheel: {\n    marginVertical: 10,\n    justifyContent: 'center',\n    alignItems: 'center'\n  }\n});\nexport default EditPost;","map":{"version":3,"names":["useNavigation","React","useState","useEffect","ref","uploadBytes","uploadBytesResumable","uploadString","getDownloadURL","Ionicons","MaterialIcons","useAuthentication","storage","db","setDoc","doc","useIsFocused","EditPost","route","isFocused","navigation","item","params","url","setUrl","caption","setCaption","uploading","setUploading","console","log","imageUrl","sharePost","dateTime","postName","imageRef","email","postRef","name","navigate","error","PostHeader","headerStyles","header","titleText","styles","imagePrev","marginVertical","justifyContent","alignItems","color","comment","uri","itemPhoto","input","text","StyleSheet","create","flexDirection","paddingHorizontal","height","backgroundColor","borderBottomColor","borderBottomWidth","hairlineWidth","fontSize","fontWeight","container","flex","sectionHeader","marginTop","marginBottom","paddingRight","aspectRatio","margin","itemText","cancelButton","position","top","left","secondScreen","bottom","right","wheel"],"sources":["/Users/davidnguyen/Desktop/fixfit/components/Social/EditPost.js"],"sourcesContent":["import { useNavigation } from '@react-navigation/native';\nimport React, { useState, useEffect } from 'react';\nimport {\n  StyleSheet,\n  SafeAreaView,\n  View,\n  ImageBackground,\n  Image,\n  Button,\n  Text,\n  TouchableOpacity,\n  TextInput,\n  ScrollView\n} from 'react-native';\nimport { ref, uploadBytes, uploadBytesResumable, uploadString, getDownloadURL } from \"firebase/storage\";\nimport { Ionicons, MaterialIcons } from '@expo/vector-icons';\nimport { useAuthentication } from '../../utils/hooks/useAuthentication';\nimport { storage, db } from '../../config/firebase'\nimport { setDoc, doc } from 'firebase/firestore'\nimport { useIsFocused } from '@react-navigation/native'\n\n\nconst EditPost = ({route}) => {\n    const isFocused = useIsFocused()\n    const navigation = useNavigation();\n    const { item } = route.params;\n\n    const [ url, setUrl ] = useState('');\n    const [ caption, setCaption ] = useState('');\n    const [ uploading, setUploading ] = useState(false);\n    \n    useEffect(() => {\n      setCaption(item.caption);\n      console.log(url);\n      setUrl(item.imageUrl);\n    }, [isFocused])\n\n    const sharePost = async () => {\n\n      setUploading(true);\n\n      const dateTime = item.postName;\n      const imageRef = ref(storage, `${item.email}/images/${dateTime}`);\n\n        try {\n            const postRef = doc(db, \"users\", item.email, \"posts\", dateTime);\n            setDoc(postRef, {\n              name: dateTime,\n              url: item.imageUrl,\n              caption: caption\n            })\n    \n            setUploading(false);\n            setCaption('');\n            setUrl('');\n            navigation.navigate(\"Social\");\n        }\n        catch(error) {\n            console.log(error);\n        }\n    }\n\n    const PostHeader = () => {\n\n      const navigation = useNavigation();\n    \n      return (\n        <View style={headerStyles.header}>\n          <Button \n            title=\"Cancel\" \n            onPress={() => navigation.navigate('Social')}\n          />\n          <Text style={headerStyles.titleText}>Post</Text>\n          <Button \n            title=\"Edit\" \n            onPress={sharePost}\n          />\n        </View>\n      )\n    }\n    \n    return (\n      <SafeAreaView style={styles.imagePrev}>\n        <PostHeader />\n          <View style={{ marginVertical: 10, justifyContent: 'center', alignItems: 'center' }}>\n              { uploading && <Text style={{ color: 'gray' }}>Uploading in progress...</Text> }\n          </View>\n        <ScrollView keyboardShouldPersistTaps='handled'>\n          <View \n            style={styles.comment}\n          >\n            <Image\n                source={{uri : url}}\n                style={styles.itemPhoto}\n            />\n            <TextInput \n                value={caption}\n                style={styles.input}\n                multiline={true}\n                textAlignVertical=\"top\"\n                placeholder=\"Comment...\"\n                onChangeText={(text) => setCaption(text)}\n            />\n          </View> \n        </ScrollView>\n      </SafeAreaView>\n    )\n};\n\nconst headerStyles = StyleSheet.create({\n  header: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    paddingHorizontal: 10,\n    height: '6%',\n    backgroundColor: '#fff',\n    borderBottomColor: '#808080',\n    borderBottomWidth: StyleSheet.hairlineWidth,\n  },\n  titleText: {\n    fontSize: 18,\n    fontWeight: '600'\n  }\n})\n\nconst styles = StyleSheet.create({\n    container: {\n      flex: 1,\n      justifyContent: 'center',\n      backgroundColor: '#fff',\n    },\n    sectionHeader: {\n      fontWeight: '700',\n      fontSize: 19,\n      color: '#000000',\n      marginTop: 20,\n      marginBottom: 10,\n    },\n    item: {\n      paddingRight: 20\n    },\n    itemPhoto: {\n      aspectRatio: 1,\n      height: 80,\n      margin: 8\n    },\n    itemText: {\n      color: '#000000',\n      marginTop: 5,\n    },\n    imagePrev: {\n      backgroundColor: 'white',\n      flex: 1,\n      // width: '100%',\n      // height: '100%'\n    },\n    cancelButton: {\n      position: 'absolute',\n      top: 40,\n      left: 40,\n      flex: 0.1,\n      color: '#fff',\n    },\n    secondScreen: {\n        position: 'absolute',\n        bottom: 40,\n        right: 40,\n        flex: 0.1,\n        color: '#fff',\n    },\n    text: {\n        fontSize: 20,\n        color: 'white',\n    },\n    input: {\n      flex: 1,\n      marginVertical: 10,\n      paddingHorizontal: 6,\n    },\n    comment: {\n      flexDirection: 'row',\n      height: 95,\n      borderBottomColor: '#808080',\n      borderBottomWidth: StyleSheet.hairlineWidth,\n    },\n    wheel: {\n        marginVertical: 10,\n        justifyContent: 'center',\n        alignItems: 'center',\n    }\n  });\n\nexport default EditPost;"],"mappings":"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"},"metadata":{},"sourceType":"module"}